<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Dashboard NASDAQ PRO</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --bg: #050b1a;
  --card: #0b1228;
  --border: rgba(255,255,255,.08);
  --text: #e5e7eb;
  --muted: #9ca3af;
  --green: #22c55e;
  --red: #ef4444;
  --yellow: #facc15;
  --blue: #3b82f6;
}

* { box-sizing: border-box; font-family: Inter, system-ui, sans-serif; }

body {
  margin: 0;
  background: radial-gradient(circle at top, #0b1228 0%, #050b1a 70%);
  color: var(--text);
}

.container {
  max-width: 1400px;
  margin: auto;
  padding: 24px;
}

h1 { margin-bottom: 16px; }

.filters {
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
}

select {
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 14px;
}

.kpis {
  display: grid;
  grid-template-columns: repeat(6,1fr);
  gap: 16px;
  margin-bottom: 24px;
}

.kpi {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
}

.kpi span { color: var(--muted); font-size: 13px; }
.kpi strong { font-size: 26px; display: block; margin-top: 6px; }

.cards {
  display: grid;
  grid-template-columns: 2.2fr 1fr;
  gap: 16px;
  margin-bottom: 24px;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 16px;
  height: 320px;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: var(--card);
  border-radius: 20px;
  overflow: hidden;
}

th, td {
  padding: 12px;
  border-bottom: 1px solid var(--border);
  text-align: center;
  font-size: 14px;
}

th { color: var(--muted); }
</style>
</head>

<body>
<div class="container">
  <h1>Dashboard NASDAQ PRO</h1>

  <div class="filters">
    <select id="filtroMes" onchange="atualizarDashboard()"></select>
    <select id="filtroSemana" onchange="atualizarDashboard()"></select>
  </div>

  <div class="kpis">
    <div class="kpi"><span>Trades</span><strong id="kTrades">0</strong></div>
    <div class="kpi"><span>Pontos</span><strong id="kPontos" style="color:var(--blue)">0</strong></div>
    <div class="kpi"><span>Gains</span><strong id="kGains" style="color:var(--green)">0</strong></div>
    <div class="kpi"><span>Stops</span><strong id="kStops" style="color:var(--red)">0</strong></div>
    <div class="kpi"><span>0x0</span><strong id="kZero" style="color:var(--yellow)">0</strong></div>
    <div class="kpi"><span>Assertividade</span><strong id="kWin">0%</strong></div>
  </div>

  <div class="cards">
    <div class="card"><canvas id="graficoLinha"></canvas></div>
    <div class="card"><canvas id="graficoBarras"></canvas></div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Dia</th><th>Semana</th><th>Pontos</th>
        <th>Trades</th><th>Gain</th><th>Stop</th><th>0x0</th>
      </tr>
    </thead>
    <tbody id="tabela"></tbody>
  </table>
</div>

<script>
const dados = [
  {dia:"01/12/2025",mes:"Dezembro",semana:"SEMANA 1",pontos:40,trades:2,gain:1,stop:0,zero:1},
  {dia:"02/12/2025",mes:"Dezembro",semana:"SEMANA 1",pontos:98,trades:2,gain:2,stop:0,zero:0},
  {dia:"03/12/2025",mes:"Dezembro",semana:"SEMANA 1",pontos:26,trades:2,gain:1,stop:1,zero:0},
  {dia:"04/12/2025",mes:"Dezembro",semana:"SEMANA 1",pontos:-25,trades:3,gain:1,stop:2,zero:0},
  {dia:"05/12/2025",mes:"Dezembro",semana:"SEMANA 1",pontos:89,trades:2,gain:2,stop:0,zero:0},
  {dia:"08/12/2025",mes:"Dezembro",semana:"SEMANA 2",pontos:45,trades:2,gain:1,stop:1,zero:0}
];

let chartLinha, chartBarra;

function iniciarFiltros() {
  const meses = ["TODOS", ...new Set(dados.map(d=>d.mes))];
  filtroMes.innerHTML = meses.map(m=>`<option>${m}</option>`).join("");
  atualizarFiltroSemanas("TODOS");
}

function atualizarFiltroSemanas(mes) {
  filtroSemana.innerHTML = "";
  if (mes === "TODOS") {
    filtroSemana.innerHTML = `<option>TODAS AS SEMANAS</option>`;
    filtroSemana.disabled = true;
    return;
  }
  filtroSemana.disabled = false;
  const semanas = [...new Set(dados.filter(d=>d.mes===mes).map(d=>d.semana))];
  filtroSemana.innerHTML = `<option>TODAS AS SEMANAS</option>` +
    semanas.map(s=>`<option>${s}</option>`).join("");
}

function atualizarDashboard() {
  const mes = filtroMes.value;
  atualizarFiltroSemanas(mes);
  const semana = filtroSemana.value;

  let filtrado = dados.filter(d =>
    (mes==="TODOS" || d.mes===mes) &&
    (semana==="TODAS AS SEMANAS" || d.semana===semana)
  );

  const totalTrades = filtrado.reduce((a,b)=>a+b.trades,0);
  const totalPontos = filtrado.reduce((a,b)=>a+b.pontos,0);
  const gain = filtrado.reduce((a,b)=>a+b.gain,0);
  const stop = filtrado.reduce((a,b)=>a+b.stop,0);
  const zero = filtrado.reduce((a,b)=>a+b.zero,0);
  const win = gain ? ((gain/(gain+stop))*100).toFixed(1) : 0;

  kTrades.textContent = totalTrades;
  kPontos.textContent = totalPontos;
  kGains.textContent = gain;
  kStops.textContent = stop;
  kZero.textContent = zero;
  kWin.textContent = win+"%";

  tabela.innerHTML = filtrado.map(d=>`
    <tr>
      <td>${d.dia}</td><td>${d.semana}</td><td>${d.pontos}</td>
      <td>${d.trades}</td><td>${d.gain}</td><td>${d.stop}</td><td>${d.zero}</td>
    </tr>`).join("");

  const labels = filtrado.map(d=>d.dia);
  let acumulado = 0;
  const pontosAcum = filtrado.map(d=>acumulado+=d.pontos);

  if (chartLinha) chartLinha.destroy();
  chartLinha = new Chart(graficoLinha, {
    type:"line",
    data:{labels,datasets:[{
      data:pontosAcum,
      borderColor:"#22c55e",
      backgroundColor:"rgba(34,197,94,.2)",
      fill:true,
      tension:.35
    }]},
    options:{plugins:{legend:{display:false}}}
  });

  if (chartBarra) chartBarra.destroy();
  chartBarra = new Chart(graficoBarras, {
    type:"bar",
    data:{
      labels:["Gains","Stops","0x0"],
      datasets:[{data:[gain,stop,zero],
        backgroundColor:["#22c55e","#ef4444","#facc15"]}]
    },
    options:{plugins:{legend:{display:false}}}
  });
}

iniciarFiltros();
atualizarDashboard();
</script>
</body>
</html>
