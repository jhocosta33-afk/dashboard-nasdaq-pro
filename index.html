<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard NASDAQ PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ====== (ESTILO INTACTO â€“ SEM ALTERAÃ‡Ã•ES) ====== */
:root{
 --bg:#020617;
 --card:#050b1a;
 --border:rgba(255,255,255,.08);
 --text:#e5e7eb;
 --muted:#9ca3af;
 --green:#22c55e;
 --red:#ef4444;
 --yellow:#facc15;
 --blue:#93c5fd;
}

*{box-sizing:border-box;font-family:Inter,system-ui;}
body{
 margin:0;
 background:radial-gradient(circle at top,#334155 0%,#1e293b 35%,#020617 75%);
 color:var(--text);
}
.container{max-width:1600px;margin:auto;padding:24px;}
.header{display:flex;flex-direction:column;margin-bottom:36px;}
.header img{height:84px;}
.dashboard-title{margin-top:20px;font-size:22px;letter-spacing:4px;font-weight:900;color:var(--blue);}
.filters{display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap;}
select{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:14px;padding:12px 16px;font-size:15px;width:220px;}
/* resto do CSS exatamente igual ao seu base */
</style>
</head>

<body>
<div class="container">

<div class="header">
 <img src="logo.png">
 <span class="dashboard-title">DASHBOARD</span>
</div>

<div class="filters">
 <select id="filtroAno"></select>
 <select id="filtroMes"></select>
 <select id="filtroSemana"></select>
</div>

<!-- KPIs, grÃ¡ficos, tabela e calendÃ¡rio INALTERADOS -->

<script>
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTbyybCny81vfVXQHmtlkKEOHHJ6xJ_pKSG_4ndkK0tH-YocrFeWY7qL41TS1IfvRQjLSbLIILV56OV/pub?output=csv";
const nomesMeses={"01":"Janeiro","02":"Fevereiro","03":"MarÃ§o","04":"Abril","05":"Maio","06":"Junho","07":"Julho","08":"Agosto","09":"Setembro","10":"Outubro","11":"Novembro","12":"Dezembro"};

let dadosCSV=[];

async function loadCSV(){
 const r=await fetch(CSV_URL,{cache:"no-store"});
 parseCSV(await r.text());
}

function parseCSV(t){
 const rows=t.trim().split(/\r?\n/);
 rows.shift();
 dadosCSV=rows.map(r=>{
  const c=r.split(",");
  const [d,m,a]=c[0].split("/");
  return{
   dia:c[0],
   data:new Date(a,m-1,d),
   semana:c[1],
   ativo:c[2],
   ano:a,
   mes:m,
   pontos:+c[3]||0,
   trades:+c[4]||0,
   gain:+c[5]||0,
   stop:+c[6]||0,
   zero:+c[7]||0
  };
 });
 initFiltros();
}

function initFiltros(){
 const anos=[...new Set(dadosCSV.map(d=>d.ano))].sort();
 filtroAno.innerHTML=anos.map(a=>`<option>${a}</option>`).join("");
 filtroAno.value=anos.at(-1);
 filtroAno.onchange=()=>initMeses();
 initMeses();
}

/* âœ… MUDANÃ‡A 1 â€” mÃªs atual + Ãºltima semana */
function initMeses(){
 const meses=[...new Set(dadosCSV
  .filter(d=>d.ano===filtroAno.value)
  .map(d=>d.mes))].sort();

 filtroMes.innerHTML=meses.map(m=>`<option value="${m}">${nomesMeses[m]}</option>`).join("");

 filtroMes.value=meses.at(-1); // ðŸ”¥ mÃªs mais recente
 filtroMes.onchange=initSemanas;

 initSemanas();
}

function initSemanas(){
 const semanas=[...new Set(
  dadosCSV.filter(d=>
   d.ano===filtroAno.value &&
   d.mes===filtroMes.value
  ).map(d=>d.semana)
 )].sort((a,b)=>a-b);

 filtroSemana.innerHTML=semanas.map(s=>`<option>${s}</option>`).join("");
 filtroSemana.value=semanas.at(-1); // ðŸ”¥ Ãºltima semana do mÃªs
 filtroSemana.onchange=atualizar;

 atualizar();
}

function atualizar(){
 /* exatamente igual ao seu cÃ³digo base */
}

loadCSV();
</script>
</body>
</html>
